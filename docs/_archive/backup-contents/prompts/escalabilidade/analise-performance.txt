Atue como engenheiro de performance sênior.

Sistema:
- Arquitetura: [DESCREVA]
- Stack: [TECNOLOGIAS]
- Banco: [TIPO E TAMANHO]
- Usuários esperados: [NÚMERO]
- Requests/segundo esperados: [NÚMERO]

Analise e proponha otimizações de performance e escalabilidade:

## 1. Análise de Gargalos

### 1.1 Database
- Queries potencialmente problemáticas
- Necessidade de índices
- N+1 queries
- Connection pool sizing

### 1.2 Application
- CPU-bound vs I/O-bound
- Memory leaks potenciais
- Concurrency issues

### 1.3 Network
- Latência entre serviços
- Payload sizes
- Número de roundtrips

## 2. Estratégia de Caching

### 2.1 O que cachear
- Dados que mudam raramente
- Queries frequentes
- Sessões/auth

### 2.2 Onde cachear
- Application level
- Redis/Memcached
- CDN (assets estáticos)

### 2.3 TTL e Invalidação
- Tempo de expiração por tipo
- Estratégia de invalidação

## 3. Escalabilidade

### 3.1 Horizontal Scaling
- Quais componentes escalam
- Como manter estado (stateless)
- Load balancing

### 3.2 Database Scaling
- Read replicas
- Sharding (se necessário)
- Connection pooling

### 3.3 Auto-scaling
- Métricas de trigger
- Thresholds
- Cooldown periods

## 4. Performance Targets (SLOs)

| Endpoint/Fluxo | Latência p95 | Throughput |
|---|---|---|
| [Endpoint 1] | < Xms | Y req/s |

## 5. Plano de Load Test

- Cenários a testar
- Ferramentas sugeridas
- Métricas a monitorar

---

## Resposta Esperada (Resumo)

### Gargalos Identificados
1. **Query de listagem** - Falta índice em `created_at`
2. **Uploads** - Bloqueiam thread principal
3. **Sessões** - Stored in DB, should be Redis

### Cache Strategy
| Dado | Onde | TTL | Invalidação |
|---|---|---|---|
| Lista de produtos | Redis | 5min | On update |
| Sessão | Redis | 1h | On logout |
| Assets | CDN | 1d | Deploy |

### Scaling
- API: 2-10 pods, HPA on CPU > 70%
- Database: 1 primary + 2 read replicas
- Redis: Cluster mode for high availability
